<?xml version="1.0" ?>
<robot name="PiDog">
  <link name="body">
    <!-- <visual><geometry><box size="0.1 0.1 0.1"/></geometry></visual>
    <collision><geometry><box size="0.1 0.1 0.1"/></geometry></collision> -->
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/body.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/body.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.0 -0.0 -0.0" rpy="0 0 0"/>
      <mass value="0.300"/><!-- 300g - body with RPi, battery, electronics, structure -->
      <!-- <inertia ixx="3.850881180e-04" ixy="-3.935522340e-05" ixz="1.660095831e-08" iyy="1.600992763e-04" iyz="4.845267497e-09" izz="3.450054696e-04"/> -->
      <inertia ixx="3.850881180e-04" ixy="1.660095831e-08" ixz="1.660095831e-08" iyy="1.600992763e-04" iyz="4.845267497e-09" izz="3.450054696e-04"/>
    </inertial>
  </link>


  <!-- ===============================================================================================================
  ========================================== BACK RIGHT LEG =====================================================
  =============================================================================================================== -->

  <link name="motor_0">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.006 0.0 0.0065" rpy="0 0 0"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>  
  
  <link name="motor_1">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.006 0.0 0.0065" rpy="0 0 0"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>

  <link name="back_right_leg_b">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_b.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_b.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0205 0.0025 0.0000" rpy="0 0 0"/>
      <mass value="0.010"/>
      <inertia ixx="2.581522796e-07" ixy="9.763369628e-08" ixz="3.929017112e-23" iyy="2.780168904e-06" iyz="-1.964508556e-23" izz="3.033456726e-06"/>
    </inertial>
  </link>

  <link name="back_right_leg_a">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_a.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_a.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0308 0.0009 0.0010" rpy="0 0 0"/>
      <mass value="0.010"/>
      <inertia ixx="2.581522796e-07" ixy="9.763369628e-08" ixz="3.929017112e-23" iyy="2.780168904e-06" iyz="-1.964508556e-23" izz="3.033456726e-06"/>
    </inertial>
  </link>

  <link name="back_right_acrylic">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/acrylic.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 -0.005 0.0" rpy="0.0 0 0.0"/>
      <geometry>
        <sphere radius="0.008"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0004 0.0012 0.0" rpy="0 0 0"/>
      <mass value="0.003"/>
      <inertia ixx="1.636324339e-08" ixy="1.277117044e-08" ixz="3.492459655e-23" iyy="6.524578372e-08" iyz="4.365574569e-24" izz="7.993559382e-08"/>
    </inertial>
  </link>

  <joint name="body_to_back_right_leg_b" type="revolute">
    <parent link="body"/>
    <child  link="back_right_leg_b"/>
    <origin xyz="0.0405 -0.06685 -0.009" rpy="0 1.57 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.0"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint>

  <joint name="back_right_leg_b_to_motor_0" type="fixed">
    <parent link="back_right_leg_b"/>
    <child  link="motor_0"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <joint name="back_right_leg_b_to_a" type="revolute">
    <parent link="back_right_leg_b"/>
    <child  link="back_right_leg_a"/>
    <origin xyz="0.047 0 0.0095" rpy="0 0 1.57"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.0"/>
    <dynamics damping="0.01" friction="0.2"/>

  </joint>
    <joint name="back_right_leg_a_to_motor_1" type="fixed">
    <parent link="back_right_leg_a"/>
    <child  link="motor_1"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <joint name="back_right_leg_a_to_acrylic" type="fixed">
    <parent link="back_right_leg_a"/>
    <child  link="back_right_acrylic"/>
    <origin xyz="0.0635 -0.00225 0.001" rpy="0 3.1415 0"/>
  </joint>


    <!-- ===============================================================================================================
  ========================================== FRONT RIGHT LEG =====================================================
  =============================================================================================================== -->

  <link name="motor_2">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.006 0.0 0.0065" rpy="0 0 0"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>  
  
  <link name="motor_3">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.006 0.0 0.0065" rpy="0 0 0"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>

  <link name="front_right_leg_b">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_b.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_b.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0205 0.0025 0.0000" rpy="0 0 0"/>
      <mass value="0.010"/>
      <inertia ixx="2.581522796e-07" ixy="9.763369628e-08" ixz="3.929017112e-23" iyy="2.780168904e-06" iyz="-1.964508556e-23" izz="3.033456726e-06"/>
    </inertial>
  </link>

  <link name="front_right_leg_a">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_a.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_a.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0308 0.0009 0.0010" rpy="0 0 0"/>
      <mass value="0.010"/>
      <inertia ixx="2.581522796e-07" ixy="9.763369628e-08" ixz="3.929017112e-23" iyy="2.780168904e-06" iyz="-1.964508556e-23" izz="3.033456726e-06"/>
    </inertial>
  </link>

  <link name="front_right_acrylic">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/acrylic.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 -0.005 0.0" rpy="0.0 0 0.0"/>
      <geometry>
        <sphere radius="0.008"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0004 0.0012 0.0" rpy="0 0 0"/>
      <mass value="0.003"/>
      <inertia ixx="1.636324339e-08" ixy="1.277117044e-08" ixz="3.492459655e-23" iyy="6.524578372e-08" iyz="4.365574569e-24" izz="7.993559382e-08"/>
    </inertial>
  </link>

  <joint name="body_to_front_right_leg_b" type="revolute">
    <parent link="body"/>
    <child  link="front_right_leg_b"/>
    <origin xyz="0.0405 0.05315 -0.009" rpy="0 1.57 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.0"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint>

  <joint name="front_right_leg_b_to_motor_2" type="fixed">
    <parent link="front_right_leg_b"/>
    <child  link="motor_2"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <joint name="front_right_leg_b_to_a" type="revolute">
    <parent link="front_right_leg_b"/>
    <child  link="front_right_leg_a"/>
    <origin xyz="0.047 0 0.0095" rpy="0 0 1.57"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.0"/>
    <dynamics damping="0.01" friction="0.2"/>

  </joint>
    <joint name="front_right_leg_a_to_motor_3" type="fixed">
    <parent link="front_right_leg_a"/>
    <child  link="motor_3"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <joint name="front_right_leg_a_to_acrylic" type="fixed">
    <parent link="front_right_leg_a"/>
    <child  link="front_right_acrylic"/>
    <origin xyz="0.0635 -0.00225 0.001" rpy="0 3.1415 0"/>
  </joint>


      <!-- ===============================================================================================================
  ========================================== BACK LEFT LEG =====================================================
  =============================================================================================================== -->

  <link name="motor_4">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.006 0.0 0.0065" rpy="0 0 0"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>  
  
  <link name="motor_5">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 3.1415"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 3.1415"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.006 0.0 0.0065" rpy="0 0 3.1415"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>

  <link name="back_left_leg_b">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="3.1415 0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_b.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="3.1415 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_b.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0205 -0.0025 0.0000" rpy="0 0 0"/>
      <mass value="0.010"/>
      <inertia ixx="2.581522796e-07" ixy="9.763369628e-08" ixz="3.929017112e-23" iyy="2.780168904e-06" iyz="-1.964508556e-23" izz="3.033456726e-06"/>
    </inertial>
  </link>

  <link name="back_left_leg_a">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 3.1415 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_a.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 3.1415 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_a.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.0308 -0.0009 -0.0010" rpy="0 3.1415 0"/>
      <mass value="0.010"/>
      <inertia ixx="2.581522796e-07" ixy="9.763369628e-08" ixz="3.929017112e-23" iyy="2.780168904e-06" iyz="-1.964508556e-23" izz="3.033456726e-06"/>
    </inertial>
  </link>

  <link name="back_left_acrylic">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/acrylic.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 -0.005 0.0" rpy="0.0 0 0.0"/>
      <geometry>
        <sphere radius="0.008"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0004 0.0012 0.0" rpy="0 0 0"/>
      <mass value="0.003"/>
      <inertia ixx="1.636324339e-08" ixy="1.277117044e-08" ixz="3.492459655e-23" iyy="6.524578372e-08" iyz="4.365574569e-24" izz="7.993559382e-08"/>
    </inertial>
  </link>

  <joint name="body_to_back_left_leg_b" type="revolute">
    <parent link="body"/>
    <child  link="back_left_leg_b"/>
    <origin xyz="-0.0405 -0.06685 -0.009" rpy="0 1.57 3.1415"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.0"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint>

  <joint name="back_left_leg_b_to_motor_4" type="fixed">
    <parent link="back_left_leg_b"/>
    <child  link="motor_4"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <joint name="back_left_leg_b_to_a" type="revolute">
    <parent link="back_left_leg_b"/>
    <child  link="back_left_leg_a"/>
    <origin xyz="0.047 0 0.0095" rpy="0 0 1.57"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.0"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint>

  <joint name="back_left_leg_a_to_acrylic" type="fixed">
    <parent link="back_left_leg_a"/>
    <child  link="back_left_acrylic"/>
    <origin xyz="-0.0635 -0.00225 -0.001" rpy="0 0 0"/>
  </joint>


  <joint name="back_left_leg_a_to_motor_5" type="fixed">
    <parent link="back_left_leg_a"/>
    <child  link="motor_5"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

    <!-- ===============================================================================================================
  ========================================== FRONT LEFT LEG =====================================================
  =============================================================================================================== -->

  <link name="motor_6">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.006 0.0 0.0065" rpy="0 0 0"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>  
  
  <link name="motor_7">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 3.1415"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 3.1415"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.006 0.0 0.0065" rpy="0 0 3.1415"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>

  <link name="front_left_leg_b">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="3.1415 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_b.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="3.1415 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_b.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0205 -0.0025 0.0000" rpy="0 0 0"/>
      <mass value="0.010"/>
      <inertia ixx="2.581522796e-07" ixy="9.763369628e-08" ixz="3.929017112e-23" iyy="2.780168904e-06" iyz="-1.964508556e-23" izz="3.033456726e-06"/>
    </inertial>
  </link>

  <link name="front_left_leg_a">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 3.1415 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_a.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 3.1415 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/leg_a.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.0308 -0.0009 -0.0010" rpy="0 3.1415 0"/>
      <mass value="0.010"/>
      <inertia ixx="2.581522796e-07" ixy="9.763369628e-08" ixz="3.929017112e-23" iyy="2.780168904e-06" iyz="-1.964508556e-23" izz="3.033456726e-06"/>
    </inertial>
  </link>  
  
  <link name="front_left_acrylic">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/acrylic.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 -0.005 0.0" rpy="0.0 0 0.0"/>
      <geometry>
        <sphere radius="0.008"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0004 0.0012 0.0" rpy="0 0 0"/>
      <mass value="0.003"/>
      <inertia ixx="1.636324339e-08" ixy="1.277117044e-08" ixz="3.492459655e-23" iyy="6.524578372e-08" iyz="4.365574569e-24" izz="7.993559382e-08"/>
    </inertial>
  </link>

  <joint name="body_to_front_left_leg_b" type="revolute">
    <parent link="body"/>
    <child  link="front_left_leg_b"/>
    <origin xyz="-0.0405 0.05315 -0.009" rpy="0 1.57 3.1415"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.0"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint>

  <joint name="front_left_leg_b_to_motor_6" type="fixed">
    <parent link="front_left_leg_b"/>
    <child  link="motor_6"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <joint name="front_left_leg_b_to_a" type="revolute">
    <parent link="front_left_leg_b"/>
    <child  link="front_left_leg_a"/>
    <origin xyz="0.047 0 0.0095" rpy="0 0 1.57"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.0"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint>

  <joint name="front_left_leg_a_to_acrylic" type="fixed">
    <parent link="front_left_leg_a"/>
    <child  link="front_left_acrylic"/>
    <origin xyz="-0.0635 -0.00225 -0.001" rpy="0 0 0"/>
  </joint>

  <joint name="front_left_leg_a_to_motor_7" type="fixed">
    <parent link="front_left_leg_a"/>
    <child  link="motor_7"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

    <!-- ===============================================================================================================
  ========================================== TAIL ================================================================
  =============================================================================================================== -->

  <link name="motor_8">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="-3.1415 0.0 -1.57075"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="-3.1415 0.0 -1.57075"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.00 0.0 -0.0065" rpy="-3.1415 0.0 -1.57075"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>  

  <link name="tail">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/tail.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/tail.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 -0.0161 0" rpy="-1.57075 0.785375 -1.57075"/>
        <mass value="0.005"/>
        <inertia ixx="1.461160457e-07" ixy="1.310689676e-07" ixz="-1.257285476e-21" iyy="1.461160457e-07" iyz="-1.257285476e-21" izz="2.634231983e-07"/>
    </inertial>
  </link>

  <joint name="body_to_motor_8" type="fixed">
    <parent link="body"/>
    <child  link="motor_8"/>
    <origin xyz="0 -0.07375 0.01" rpy="0.785375 0 0"/>
  </joint>

  <joint name="motor_8_to_tail" type="revolute">
    <parent link="motor_8"/>
    <child  link="tail"/>
    <origin xyz="0 0 0.008" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.0"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint>


  <!-- ===============================================================================================================
  ========================================== HEAD ================================================================
  =============================================================================================================== -->

  <link name="motor_9">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.006 0.0 0.0065" rpy="0 0 0"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>  

    <link name="motor_10">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.006 0.0 0.0065" rpy="0 0 0"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link>  

  <link name="motor_11">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/motor.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.006 0.0 0.0065" rpy="0 0 0"/>
      <mass value="0.0135"/>
      <inertia ixx="6.435884464e-07" ixy="9.642824068e-23" ixz="-3.026407696e-08" iyy="1.064905063e-06" iyz="2.896510287e-23" izz="6.314836794e-07"/>
    </inertial>
  </link> 
  
  <!-- #TODO - Update mass and inertia of neck and head-->

  <link name="neck1">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/neck1.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/neck1.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0.011" rpy="1.57075 0.785375 0"/>
      <mass value="0.005"/>
      <inertia ixx="1.461160457e-07" ixy="1.310689676e-07" ixz="0.000000000e+00" iyy="1.461160457e-07" iyz="-1.257285476e-21" izz="2.634231983e-07"/>
    </inertial>
  </link>  
  
  <link name="neck2">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/neck2.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/neck2.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.0008 0.0024 0.0" rpy="0 0 0.785375"/>
      <mass value="0.005"/>
      <inertia ixx="4.149053953e-06" ixy="3.240084171e-07" ixz="-3.820969141e-21" iyy="4.137782302e-06" iyz="-8.928691386e-21" izz="1.283483167e-06"/>
    </inertial>
  </link>  
  
  <link name="neck3">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/neck3.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/neck3.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0.0014 0.0 -0.0173" rpy="-1.57075 0 -3.1415"/>
      <mass value="0.005"/>
      <inertia ixx="2.358402818e-06" ixy="6.982662427e-08" ixz="1.885928214e-21" iyy="1.656307063e-06" iyz="0.000000000e+00" izz="3.437501256e-06"/>
    </inertial>
  </link>

  <link name="head">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/head.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/head.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.0003 0.0 -0.0011" rpy="1.57075 1.57075 0"/>
      <mass value="0.025"/>
      <inertia ixx="4.566766722e-05" ixy="-3.958690952e-06" ixz="-2.514570951e-21" iyy="1.811860320e-05" iyz="-4.526227713e-20" izz="4.235840403e-05"/>
    </inertial>
  </link>  
  
  <link name="eyes">
    <visual>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/eyes.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin xyz="0.0 0.0 0.0" rpy="0.0 -0.0 0.0"/>
      <geometry>
        <mesh filename="package://pidog_description/meshes/eyes.dae"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.003 0.0004 -0.0013" rpy="1.57075 1.57075 0"/>
      <mass value="0.030"/>
      <inertia ixx="7.646257329e-06" ixy="2.296302215e-08" ixz="2.514570951e-21" iyy="8.977810601e-06" iyz="-1.571606845e-22" izz="2.649152211e-06"/>
    </inertial>
  </link>

  <joint name="body_to_neck1" type="fixed">
    <parent link="body"/>
    <child  link="neck1"/>
    <origin xyz="0 0.07 0.013" rpy="0 0.785375 1.57075"/>
  </joint>  
  
  <joint name="neck1_to_motor_9" type="revolute">
    <parent link="neck1"/>
    <child  link="motor_9"/>
    <!-- <origin xyz="0 -0.0025 0.0125" rpy="0 0 0"/> -->
    <origin xyz="0 0.01 0.015" rpy="1.57075 0.785375 0"/>
      <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.5"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint>  
  
  <joint name="motor_9_to_neck2" type="fixed">
    <parent link="motor_9"/>
    <child  link="neck2"/>
    <!-- <origin xyz="0 -0.0025 0.0125" rpy="0 0 0"/> -->
    <origin xyz="0.006 -0.001 0.0125" rpy="0.0 0.0 0.0"/>
  </joint>

  <joint name="neck2_to_motor_10" type="revolute">
    <parent link="neck2"/>
    <child  link="motor_10"/>
    <!-- <origin xyz="0 -0.0025 0.0125" rpy="0 0 0"/> -->
    <origin xyz="0 -0.021 -0.003" rpy="-1.57075 0 3.1415"/>
      <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.5"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint>  

  <joint name="motor_10_to_neck3" type="fixed">
    <parent link="motor_10"/>
    <child  link="neck3"/>
    <!-- <origin xyz="0 -0.0025 0.0125" rpy="0 0 0"/> -->
    <origin xyz="0.011 0.0 -0.0" rpy="0.0 0.0 0.0"/>
  </joint>

  <joint name="neck3_to_motor_11" type="revolute">
    <parent link="neck3"/>
    <child  link="motor_11"/>
    <!-- <origin xyz="0 -0.0025 0.0125" rpy="0 0 0"/> -->
    <origin xyz="0.0265 0.0 -0.0125" rpy="0 1.57075 0"/>
      <limit effort="0.5" lower="-1.57" upper="1.57" velocity="7.5"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.01" friction="0.2"/>
  </joint> 

   <joint name="motor_11_to_head" type="fixed">
    <parent link="motor_11"/>
    <child  link="head"/>
    <!-- <origin xyz="0 -0.0025 0.0125" rpy="0 0 0"/> -->
    <origin xyz="0.025 0.0 0.015" rpy="0 0.0 0"/>
  </joint>    
  
  <joint name="head_to_eyes" type="fixed">
    <parent link="head"/>
    <child  link="eyes"/>
    <!-- <origin xyz="0 -0.0025 0.0125" rpy="0 0 0"/> -->
    <origin xyz="0.0 0.0 0.036" rpy="0 0.0 0"/>
  </joint>

  <!-- ===============================================================================================================
  ========================================== SENSORS =============================================================
  =============================================================================================================== -->

  <!-- IMU Sensor - Mounted on body center for balance/orientation sensing -->
  <link name="imu_link">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
  </link>

  <joint name="imu_joint" type="fixed">
    <parent link="body"/>
    <child link="imu_link"/>
    <!-- Center of body, 2cm up, rotated 90° to lay flat on its side -->
    <origin xyz="0 0 0.02" rpy="0 1.5708 0"/>
  </joint>

  <!-- Modern Gazebo (Jetty) IMU sensor - no plugin tag needed -->
  <!-- World file must have: <plugin filename="gz-sim-imu-system" name="gz::sim::systems::Imu"/> -->
  <gazebo reference="imu_link">
    <sensor name="imu_sensor" type="imu">
      <always_on>true</always_on>
      <update_rate>100</update_rate>
      <visualize>false</visualize>
      <topic>imu</topic>
      <gz_frame_id>imu_link</gz_frame_id>
      <imu>
        <angular_velocity>
          <x>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.01</stddev>
            </noise>
          </x>
          <y>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.01</stddev>
            </noise>
          </y>
          <z>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.01</stddev>
            </noise>
          </z>
        </angular_velocity>
        <linear_acceleration>
          <x>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.1</stddev>
            </noise>
          </x>
          <y>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.1</stddev>
            </noise>
          </y>
          <z>
            <noise type="gaussian">
              <mean>0.0</mean>
              <stddev>0.1</stddev>
            </noise>
          </z>
        </linear_acceleration>
      </imu>
    </sensor>
  </gazebo>

  <!-- Camera Sensor - Mounted on nose for vision-based RL -->
  <link name="camera_link">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
    <!-- Small visual box to show camera location -->
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.005 0.01 0.005"/>
      </geometry>
      <material name="black">
        <color rgba="0.1 0.1 0.1 1"/>
      </material>
    </visual>
  </link>

  <joint name="camera_joint" type="fixed">
    <parent link="head"/>
    <child link="camera_link"/>
    <!-- Mount at center of nose, pointing forward -->
    <origin xyz="0.03 0 0.01" rpy="0 0 0"/>
  </joint>

  <!-- Modern Gazebo (Jetty) Camera sensor -->
  <gazebo reference="camera_link">
    <sensor name="nose_camera" type="camera">
      <always_on>true</always_on>
      <update_rate>30</update_rate>
      <visualize>false</visualize>
      <topic>camera</topic>
      <gz_frame_id>camera_link</gz_frame_id>
      <camera>
        <horizontal_fov>1.047</horizontal_fov>  <!-- 60 degrees -->
        <image>
          <width>320</width>
          <height>240</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>10.0</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
    </sensor>
  </gazebo>

  <!-- Ultrasonic Sensor (HC-SR04) - The "eyes" ARE the ultrasonic sensor -->
  <!-- HC-SR04 has 2 transducers (transmitter/receiver) that look like eyes -->
  <link name="ultrasonic_link">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
    <!-- Visual representation: two "eyes" (HC-SR04 transducers) -->
    <!-- Spaced wider (20mm apart) to align with eye piece circles -->
    <!-- Rotated 90° around Y-axis to face forward (circular face visible from front) -->
    <visual>
      <origin xyz="0 0.010 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.008" length="0.004"/>
      </geometry>
      <material name="silver">
        <color rgba="0.8 0.8 0.9 1"/>
      </material>
    </visual>
    <visual>
      <origin xyz="0 -0.010 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.008" length="0.004"/>
      </geometry>
      <material name="silver">
        <color rgba="0.8 0.8 0.9 1"/>
      </material>
    </visual>
  </link>

  <joint name="ultrasonic_joint" type="fixed">
    <parent link="head"/>
    <child link="ultrasonic_link"/>
    <!-- Position at eyes location - HC-SR04 transducers ARE the eyes -->
    <!-- Looking straight forward, transducers spaced to align with eye circles -->
    <origin xyz="0.0 0.0 0.036" rpy="0 0 0"/>
  </joint>

  <!-- Modern Gazebo (Jetty) Ultrasonic/GPU Lidar sensor (simulates HC-SR04) -->
  <gazebo reference="ultrasonic_link">
    <sensor name="ultrasonic_sensor" type="gpu_lidar">
      <always_on>true</always_on>
      <update_rate>10</update_rate>
      <visualize>false</visualize>
      <topic>ultrasonic</topic>
      <gz_frame_id>ultrasonic_link</gz_frame_id>
      <lidar>
        <!-- Simulate HC-SR04: single beam, 2cm-400cm range, <15° cone -->
        <scan>
          <horizontal>
            <samples>1</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </horizontal>
          <vertical>
            <samples>1</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.02</min>
          <max>4.0</max>
          <resolution>0.003</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.003</stddev>
        </noise>
      </lidar>
    </sensor>
  </gazebo>

  <!-- Touch Sensor - On top of head piece, behind eyes -->
  <!-- Real PiDog has 1 touch sensor flush on the head surface -->
  <link name="touch_sensor_link">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.0005" rpy="0 0 0"/>
      <geometry>
        <box size="0.012 0.018 0.001"/>
      </geometry>
      <material name="red">
        <color rgba="0.8 0.1 0.1 0.6"/>
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0.0005" rpy="0 0 0"/>
      <geometry>
        <box size="0.012 0.018 0.001"/>
      </geometry>
    </collision>
  </link>

  <joint name="touch_sensor_joint" type="fixed">
    <parent link="head"/>
    <child link="touch_sensor_link"/>
    <!-- Moved back by 2× length (2 × 0.012 = 0.024m) to sit on head piece -->
    <origin xyz="-0.027 0 0.020" rpy="0 0 0"/>
  </joint>

  <!-- Gazebo contact sensor for touch detection -->
  <gazebo reference="touch_sensor_link">
    <sensor name="touch_sensor" type="contact">
      <always_on>true</always_on>
      <update_rate>30</update_rate>
      <contact>
        <collision>touch_sensor_link_collision</collision>
      </contact>
    </sensor>
  </gazebo>

  <!-- Microphone Array (3 microphones) - Sound direction detection -->
  <!-- Left microphone -->
  <link name="mic_left_link">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.002"/>
      </geometry>
      <material name="black">
        <color rgba="0.1 0.1 0.1 1"/>
      </material>
    </visual>
  </link>

  <joint name="mic_left_joint" type="fixed">
    <parent link="head"/>
    <child link="mic_left_link"/>
    <origin xyz="0.02 0.015 0.025" rpy="0 0 0"/>
  </joint>

  <!-- Center microphone -->
  <link name="mic_center_link">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.002"/>
      </geometry>
      <material name="black">
        <color rgba="0.1 0.1 0.1 1"/>
      </material>
    </visual>
  </link>

  <joint name="mic_center_joint" type="fixed">
    <parent link="head"/>
    <child link="mic_center_link"/>
    <origin xyz="0.025 0 0.025" rpy="0 0 0"/>
  </joint>

  <!-- Right microphone -->
  <link name="mic_right_link">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <sphere radius="0.002"/>
      </geometry>
      <material name="black">
        <color rgba="0.1 0.1 0.1 1"/>
      </material>
    </visual>
  </link>

  <joint name="mic_right_joint" type="fixed">
    <parent link="head"/>
    <child link="mic_right_link"/>
    <origin xyz="0.02 -0.015 0.025" rpy="0 0 0"/>
  </joint>

  <!-- RGB LED Strip - Visual indicator on chest -->
  <link name="rgb_led_link">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.04 0.02 0.002"/>
      </geometry>
      <material name="led_blue">
        <color rgba="0.2 0.4 1.0 0.8"/>
      </material>
    </visual>
  </link>

  <joint name="rgb_led_joint" type="fixed">
    <parent link="body"/>
    <child link="rgb_led_link"/>
    <!-- Front chest area -->
    <origin xyz="0.045 0 0.01" rpy="0 0 0"/>
  </joint>

  <!-- Speaker - Audio output (visual representation) -->
  <link name="speaker_link">
    <inertial>
      <mass value="0.001"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.008" length="0.003"/>
      </geometry>
      <material name="dark_gray">
        <color rgba="0.3 0.3 0.3 1"/>
      </material>
    </visual>
  </link>

  <joint name="speaker_joint" type="fixed">
    <parent link="body"/>
    <child link="speaker_link"/>
    <!-- Bottom center of body -->
    <origin xyz="-0.03 0 -0.015" rpy="0 0 0"/>
  </joint>

  <!-- Gazebo-specific settings for sphere paw contacts -->
  <!-- Reduced stiffness to prevent bouncing - more realistic for compliant contact -->
  <gazebo reference="back_right_acrylic">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>1000000.0</kp><!-- 1e6 - reasonable stiffness, prevents numerical instability -->
    <kd>500.0</kd><!-- Moderate damping to absorb impacts -->
    <minDepth>0.001</minDepth>
    <maxVel>0.1</maxVel>
    <material>Gazebo/Grey</material>
  </gazebo>

  <gazebo reference="front_right_acrylic">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>1000000.0</kp>
    <kd>500.0</kd>
    <minDepth>0.001</minDepth>
    <maxVel>0.1</maxVel>
    <material>Gazebo/Grey</material>
  </gazebo>

  <gazebo reference="back_left_acrylic">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>1000000.0</kp>
    <kd>500.0</kd>
    <minDepth>0.001</minDepth>
    <maxVel>0.1</maxVel>
    <material>Gazebo/Grey</material>
  </gazebo>

  <gazebo reference="front_left_acrylic">
    <mu1>0.5</mu1>
    <mu2>0.5</mu2>
    <kp>1000000.0</kp>
    <kd>500.0</kd>
    <minDepth>0.001</minDepth>
    <maxVel>0.1</maxVel>
    <material>Gazebo/Grey</material>
  </gazebo>

  <!-- ros2_control - Active position control for all joints -->
  <ros2_control name="GazeboSystem" type="system">
    <hardware>
      <plugin>gz_ros2_control/GazeboSimSystem</plugin>
    </hardware>

    <!-- Back Right Leg -->
    <joint name="body_to_back_right_leg_b">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="back_right_leg_b_to_a">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <!-- Front Right Leg -->
    <joint name="body_to_front_right_leg_b">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="front_right_leg_b_to_a">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <!-- Back Left Leg -->
    <joint name="body_to_back_left_leg_b">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="back_left_leg_b_to_a">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <!-- Front Left Leg -->
    <joint name="body_to_front_left_leg_b">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="front_left_leg_b_to_a">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <!-- Tail -->
    <joint name="motor_8_to_tail">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>

    <!-- Head/Neck -->
    <joint name="neck1_to_motor_9">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="neck2_to_motor_10">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="neck3_to_motor_11">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>

  <!-- Gazebo plugin for ros2_control -->
  <gazebo>
    <plugin filename="gz_ros2_control-system" name="gz_ros2_control::GazeboSimROS2ControlPlugin">
      <robot_param>robot_description</robot_param>
      <robot_param_node>robot_state_publisher</robot_param_node>
      <parameters>$(find pidog_description)/config/pidog_controllers.yaml</parameters>
      <!-- Reduced gain to prevent oscillation - multiplies YAML PID gains -->
      <position_proportional_gain>1.0</position_proportional_gain>
    </plugin>
  </gazebo>

  <!-- Strong PID gains for each joint to simulate servo holding torque -->
  <gazebo reference="body_to_back_right_leg_b">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="back_right_leg_b_to_a">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="body_to_front_right_leg_b">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="front_right_leg_b_to_a">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="body_to_back_left_leg_b">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="back_left_leg_b_to_a">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="body_to_front_left_leg_b">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="front_left_leg_b_to_a">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>

  <!-- Tail and neck joints need implicit spring damper for stability -->
  <gazebo reference="motor_8_to_tail">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="neck1_to_motor_9">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="neck2_to_motor_10">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo reference="neck3_to_motor_11">
    <implicitSpringDamper>true</implicitSpringDamper>
    <provideFeedback>true</provideFeedback>
  </gazebo>

</robot>
